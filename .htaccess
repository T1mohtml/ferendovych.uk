# No HTTPS redirect â€” Cloudflare handles it
AddDefaultCharset UTF-8
Options -Indexes

# Password protect info.php
<Files "info.php">
    AuthType Basic
    AuthName "Restricted Access"
    AuthUserFile /etc/apache2/.htpasswd
    Require valid-user
</Files>

# Password protect console.php
<Files "console.php">
    AuthType Basic
    AuthName "Restricted Access"
    AuthUserFile /etc/apache2/.htpasswd
    Require valid-user
</Files>

RewriteEngine On

# Disable rewrite and redirect for console.php
RewriteRule ^console\.php$ - [L]

# --- Redirect /file.php to /file, except info.php and console.php ---
RewriteCond %{THE_REQUEST} \s/([a-zA-Z0-9_-]+)\.php [NC]
RewriteCond %1 !=info
RewriteCond %1 !=console
RewriteRule ^([a-zA-Z0-9_-]+)\.php$ /$1 [R=301,L]

# --- Internally rewrite /file to /file.php if it exists, except info and console ---
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteCond $1 !=info
RewriteCond $1 !=console
RewriteRule ^([a-zA-Z0-9_-]+)$ $1.php [L]

